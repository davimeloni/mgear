<div>
    <h2 id="page-heading">
        <span>Sprockets</span>
    </h2>

    <p-accordion>
        <p-accordionTab header="Columns" [selected]="false">
            <div class="row" style="padding-left: 5px;">
                <button type="button" class="btn btn-outline-success" (click)="selectAllColumns()" style="float:left; margin-right: 10px;">
                    <i class="pi pi-eye"></i>All</button>
                <button type="button" class="btn btn-outline-danger" (click)="unselectAllColumns()" style="float:left; margin-right: 10px;">
                    <i class="pi pi-eye-slash"></i>All</button>
            </div>
            <div class="row">
                <div *ngFor="let c of displayColumns2; index as i;">
                    <div class="col-wrapper" *ngIf="(c.field !== 'ourNotes' && c.field !== 'customerNotes')" style="white-space: nowrap;">
                        <p-toggleButton onLabel="{{c.label}}" offLabel="{{c.label}}" onIcon="pi pi-check" offIcon="pi pi-times"
                            [(ngModel)]="c.display"></p-toggleButton>
                    </div>
                </div>
            </div>
        </p-accordionTab>
    </p-accordion>

    <p-dialog header="Delete Selected" [(visible)]="displayDialog" [modal]="true" [responsive]="true" [width]="350"
        [minWidth]="200" [minY]="70" [baseZIndex]="10000">
        <span>{{dialogContent}}</span>
        <p-footer>
            <button type="button" pButton icon="pi pi-check" (click)="deleteItems()" label="Yes"></button>
            <button type="button" pButton icon="pi pi-close" (click)="displayDialog=false" label="No" class="ui-button-secondary"></button>
        </p-footer>
    </p-dialog>

    <p-dialog header="Saving Data..." [(visible)]="displayDialog2" [modal]="true" [responsive]="true" [minWidth]="200"
        [wdith]="400" [minY]="70" [baseZIndex]="10000">
        <p>Please wait while we save the data on the database. It might take a couple of minutes depending on file's
            size</p><br>
        <p>After the import is complete, click on refresh button to update the table with the new data.</p><br>
        <p>You can also check its status by clicking on Last CSV Report.</p>
    </p-dialog>

    <p-dialog header="Last CSV Report" [(visible)]="dialogLastCSV" [modal]="true" [responsive]="true" [minWidth]="200"
        [width]="700" [minY]="70" [baseZIndex]="10000">
        <div class="table-responsive" *ngIf="lastCSVReport">
            <table class="table table-striped">
                <thead>
                    <th>SKU</th>
                    <th>Performed</th>
                    <th>Status</th>
                    <th>Error Message</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of lastCSVReport;trackBy: trackId">
                        <td style="width:1%;white-space:nowrap;"><a [routerLink]="['/sprocket', item.id, 'view' ]">{{item.sku}}</a></td>
                        <td>{{item.performed}}</td>
                        <td>{{item.status}}</td>
                        <td>{{item.errorMessage}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </p-dialog>

    <hr />
    <p-toast [style]="{marginTop: '80px'}"></p-toast>

    <p-table class="entity-table2" #dt [columns]="displayColumns2" [value]="sprockets" [paginator]="true" [rows]="10"
        [(selection)]="selectedSprockets" sortField="sku" dataKey="id" [rowsPerPageOptions]="[10,15,20,25]" sortOrder="1"
        [reorderableColumns]="true" expandableRows="true" [responsive]="true" [autoLayout]="true">
        <ng-template pTemplate="caption" style="margin: 5px;">
            <div class="ui-helper-clearfix">
                <button type="button" class="btn btn-outline-primary" (click)="dt.exportCSV()" style="float:left; margin-right: 10px;">
                    <i class="pi pi-download"></i>Export All</button>
                <button type="button" class="btn btn-outline-primary" (click)="dt.exportCSV({selectionOnly:true})"
                    style="float:left;">
                    <i class="pi pi-download"></i>Export Selected Only</button>
                <input type='file' (change)='convertFile(input)' id='fileInput' #input>
                <button type="button" class="btn btn-outline-primary" (click)="saveCSV()">
                    <i class="pi pi-upload"></i>Upload CSV</button>
                <button type="button" class="btn btn-outline-primary" (click)="popupCSV()">
                    <i class="pi pi-list"></i>Last CSV Report</button>

                <button type="button" class="btn btn-outline-info" style="float:right; margin-left: 10px; border-color: transparent;"
                    (click)="reloadAll()">
                    <i class="pi pi-refresh"></i>
                </button>
                <button type="button" class="btn btn-outline-primary" style="float:right;" [routerLink]="['/sprocket/new']">
                    <fa-icon [icon]="'plus'"></fa-icon>
                    <span>
                        Create new Sprocket
                    </span>
                </button>
            </div>
            <div style="text-align: right; margin-top: 5px;">
                <i class="fa fa-search" style="margin:4px 4px 0 0"></i>
                <input type="text" pInputText size="50" placeholder="Global Filter" (input)="dt.filterGlobal($event.target.value, 'contains')"
                    style="width:auto">
            </div>
        </ng-template>

        <ng-template pTemplate="header" let-columns let-rowData>
            <tr>
                <th>
                    <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                    <button type="button" (click)="confirmDeleteSelected()" class="btn btn-outline-danger">
                        <i class="pi pi-trash"></i>
                    </button>
                </th>
                <th *ngFor="let col of columns" [pSortableColumn]="col.field" [ngSwitch]="col.field" [hidden]="!col.display">
                    <input type="checkbox" [(ngModel)]="col.display" value="col.display">
                    {{col.label}}
                    <p-sortIcon [field]="col.field" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order"
                        ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
                </th>
            </tr>

            <tr>
                <th></th>
                <th *ngFor="let col of columns" [ngSwitch]="col.field" [hidden]="!col.display">
                    <input *ngSwitchCase="'sku'" pInputText type="text" (input)="dt.filter($event.target.value, col.field, col.filterMatchMode)">
                </th>
            </tr>

        </ng-template>
        <ng-template pTemplate="body" let-rowData let-columns="columns" let-index="rowIndex">
            <tr>
                <td>
                    <p-tableCheckbox [value]="rowData"></p-tableCheckbox>
                    <button type="submit" [routerLink]="['/', { outlets: { popup: 'sprocket/'+ rowData.id + '/delete'} }]"
                        replaceUrl="true" queryParamsHandling="merge" class="btn btn-outline-danger">
                        <i class="pi pi-trash"></i>
                    </button>
                    <button type="submit" [routerLink]="['/sprocket', rowData.id, 'view' ]" class="btn btn-outline-info">
                        <i class="pi pi-eye"></i>
                    </button>
                    <a [pRowToggler]="rowData">
                        <i [ngClass]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"></i>
                    </a>
                </td>
                <td [hidden]="!displayColumns2[0].display">
                    <a [routerLink]="['/sprocket', rowData.id, 'view' ]">{{rowData.id}}</a>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[1].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.sku" (change)="rowChanged()"
                                (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.sku}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[2].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <select [(ngModel)]="rowData.active" (change)="rowChanged()" (blur)="saveRow(rowData)"
                                (keydown.enter)="saveRow(rowData)">
                                <option *ngFor="let opt of ynOptions" [value]="opt">{{opt}}</option>
                            </select>
                        </ng-template>
                        <ng-template pTemplate="output">{{rowData.active}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[3].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <select [(ngModel)]="rowData.au" (change)="rowChanged()" (blur)="saveRow(rowData)"
                                (keydown.enter)="saveRow(rowData)">
                                <option *ngFor="let opt of ynOptions" [value]="opt">{{opt}}</option>
                            </select>
                        </ng-template>
                        <ng-template pTemplate="output">{{rowData.au}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[4].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <select [(ngModel)]="rowData.de" (change)="rowChanged()" (blur)="saveRow(rowData)"
                                (keydown.enter)="saveRow(rowData)">
                                <option *ngFor="let opt of ynOptions" [value]="opt">{{opt}}</option>
                            </select>
                        </ng-template>
                        <ng-template pTemplate="output">{{rowData.de}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[5].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <select [(ngModel)]="rowData.metalGearvisibility" (change)="rowChanged()" (blur)="saveRow(rowData)"
                                (keydown.enter)="saveRow(rowData)">
                                <option *ngFor="let opt of ynOptions" [value]="opt">{{opt}}</option>
                            </select>
                        </ng-template>
                        <ng-template pTemplate="output">{{rowData.metalGearvisibility}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[6].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <select [(ngModel)]="rowData.bikematevisibility" (change)="rowChanged()" (blur)="saveRow(rowData)"
                                (keydown.enter)="saveRow(rowData)">
                                <option *ngFor="let opt of ynOptions" [value]="opt">{{opt}}</option>
                            </select>
                        </ng-template>
                        <ng-template pTemplate="output">{{rowData.bikematevisibility}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[7].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <select [(ngModel)]="rowData.mgiVisibility" (change)="rowChanged()" (blur)="saveRow(rowData)"
                                (keydown.enter)="saveRow(rowData)">
                                <option *ngFor="let opt of ynOptions" [value]="opt">{{opt}}</option>
                            </select>
                        </ng-template>
                        <ng-template pTemplate="output">{{rowData.mgiVisibility}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[8].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.status"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.status}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[9].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.productGroup1"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.productGroup1}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[10].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.productGroup2"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.productGroup2}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[11].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.countries"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.countries}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[12].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.fitment"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.fitment}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[13].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.description"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.description}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[14].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.unit"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.unit}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[15].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="number" [(ngModel)]="rowData.qty"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.qty}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[16].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.brand"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.brand}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[17].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.biketypes"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.biketypes}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[18].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.fitsMakes"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.fitsMakes}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[19].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="number" [(ngModel)]="rowData.modelsupto"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.modelsupto}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[20].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="number" [(ngModel)]="rowData.gS1EAN"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.gS1EAN}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[21].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.ourNotes"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.ourNotes}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[22].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.customerNotes"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.customerNotes}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[23].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="number" [(ngModel)]="rowData.weightkg"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.weightkg}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[24].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.packType"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.packType}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[25].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="number" [(ngModel)]="rowData.packLength"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.packLength}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[26].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="number" [(ngModel)]="rowData.packWidth"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.packWidth}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[27].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="number" [(ngModel)]="rowData.packHeight"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.packHeight}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[28].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="number" [(ngModel)]="rowData.packCubic"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.packCubic}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[29].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="number" [(ngModel)]="rowData.sprocketChainSize"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.sprocketChainSize}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[30].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="number" [(ngModel)]="rowData.sprocketTeeth"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.sprocketTeeth}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[31].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.eSBHC"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.eSBHC}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[32].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="number" [(ngModel)]="rowData.eSID"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.eSID}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[33].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.eSIDinnerTeeth"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.eSIDinnerTeeth}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[34].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="number" [(ngModel)]="rowData.eSBHQty"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.eSBHQty}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[35].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.eSBHSize"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.eSBHSize}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[36].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.eSBHType"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.eSBHType}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[37].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="number" [(ngModel)]="rowData.eSWidth"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.eSWidth}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[38].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.tolistonEbay"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.tolistonEbay}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[39].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.eListing"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.eListing}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[40].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.eforMake"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.eforMake}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[41].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.euploadedNeto"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.euploadedNeto}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[42].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.eDate"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.eDate}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[43].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.echeck"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.echeck}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[44].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.euploadedeBay"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.euploadedeBay}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[45].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.eBayactive"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.eBayactive}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[46].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.ePhotobucket"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.ePhotobucket}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[47].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.ePhotoMain"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.ePhotoMain}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[48].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.ePhotoClear"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.ePhotoClear}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[49].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.ePhotoSide"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.ePhotoSide}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[50].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.salesStatus"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.salesStatus}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[51].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="number" [(ngModel)]="rowData.rRP"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.rRP}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[52].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="number" [(ngModel)]="rowData.eBay"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.eBay}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[53].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="number" [(ngModel)]="rowData.trade1"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.trade1}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[54].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="number" [(ngModel)]="rowData.trade2"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.trade2}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[55].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="number" [(ngModel)]="rowData.trade3"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.trade3}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[56].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.distributorNZAUD"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.distributorNZAUD}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[57].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.distributorUSD"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.distributorUSD}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[58].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.distributorEUR"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.distributorEUR}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[59].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.bikemateAUD"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.bikemateAUD}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[60].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.compMetalGear"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.compMetalGear}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[61].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.compMogema"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.compMogema}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[62].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.compJT"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.compJT}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[63].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.jTBHC"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.jTBHC}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[64].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="number" [(ngModel)]="rowData.jTID"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.jTID}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[65].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="number" [(ngModel)]="rowData.jTIDinnerTeeth"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.jTIDinnerTeeth}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[66].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.jTBHQty"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.jTBHQty}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[67].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="number" [(ngModel)]="rowData.jTBHSize"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.jTBHSize}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[68].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.jTBHType"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.jTBHType}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[69].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="number" [(ngModel)]="rowData.jTWidth"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.jTWidth}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[70].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.jTNote"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.jTNote}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[71].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.compEsjot"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.compEsjot}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[72].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.compSuperSprox"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.compSuperSprox}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[73].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="number" [(ngModel)]="rowData.stock"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.stock}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[74].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="number" [(ngModel)]="rowData.minStock"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.minStock}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[75].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="number" [(ngModel)]="rowData.maxStock"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.maxStock}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[76].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.supplier"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.supplier}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[77].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.supplierCode"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.supplierCode}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[78].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="text" [(ngModel)]="rowData.supplierCurrency"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.supplierCurrency}}</ng-template>
                    </p-cellEditor>
                </td>
                <td pEditableColumn [hidden]="!displayColumns2[79].display">
                    <p-cellEditor>
                        <ng-template pTemplate="input"><input pInputText type="number" [(ngModel)]="rowData.supplierCost"
                                (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></ng-template>
                        <ng-template pTemplate="output">{{rowData.supplierCost}}</ng-template>
                    </p-cellEditor>
                </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="rowexpansion" let-rowData let-columns="columns">
            <tr>
                <td [attr.colspan]="columns.length + 1">
                    <div class="ui-g ui-fluid row">
                        <div style="display: inline-block;">
                            <span style="padding:20px;">Our Notes</span>
                            <div class="ui-g ui-fluid" style="font-size:16px;padding:20px;width:400px;">
                                <textarea pInputTextarea [(ngModel)]="rowData.ourNotes" autoResize="autoResize" rows="5"
                                    cols="30" (change)="rowChanged()" (blur)="saveRow(rowData)" (keydown.enter)="saveRow(rowData)"></textarea>
                            </div>
                        </div>
                        <div style="display: inline-block;">
                            <span style="padding:20px;">Customer Notes</span>
                            <div class="ui-g ui-fluid" style="font-size:16px;padding:20px;width:400px;">
                                <textarea pInputTextarea [(ngModel)]="rowData.customerNotes" autoResize="autoResize"
                                    rows="5" cols="30" (change)="rowChanged()" (blur)="saveRow(rowData)"
                                    (keydown.enter)="saveRow(rowData)"></textarea>
                            </div>
                        </div>
                    </div>
                </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="summary">
            <div class="row" style="padding-left: 10px;">
                <p>Selected Sprockets:</p>
                <div *ngFor="let sel of selectedSprockets">
                    <span>&nbsp;{{sel.sku}},</span>
                </div>
            </div>
        </ng-template>
    </p-table>
</div>